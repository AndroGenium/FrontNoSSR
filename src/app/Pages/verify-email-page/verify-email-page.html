<main>
  <div class="verify-container">
    <!-- Logo -->
    <div class="verify-logo">
      <div class="logo-icon">T</div>
      <span class="logo-text">Toolsnearme</span>
    </div>

    <!-- Header -->
    <div class="verify-header">
      <h1>Verify Email</h1>
      <p>Code sent to</p>
      <span class="email-display">{{ userEmail }}</span>
    </div>

    <!-- Code Inputs -->
    <form (ngSubmit)="onVerify()">
      <div class="code-inputs">
        @for (val of codeValues; track $index) {
          <input 
            #codeInput
            type="text" 
            inputmode="numeric"
            pattern="[0-9]*"
            maxlength="1" 
            class="code-input"
            [class.filled]="hasValue($index)"
            [class.error]="showError"
            [value]="codeValues[$index]"
            (input)="onInput($event, $index)"
            (keydown)="onKeyDown($event, $index)"
            (paste)="onPaste($event, $index)"
            autocomplete="off"
          />
        }
      </div>

      @if (showError) {
        <div class="error-message show">
          {{ errorMessage }}
        </div>
      }
      
      @if (showSuccess) {
        <div class="success-message show">
          {{ successMessage }}
        </div>
      }

      <button 
        type="submit" 
        class="btn-verify" 
        [disabled]="isVerifying"
      >
        {{ isVerifying ? 'Verifying...' : 'Verify' }}
      </button>
    </form>

    <!-- Resend Section -->
    <div class="resend-section">
      <p>Didn't receive it?</p>
      <button 
        type="button"
        class="btn-resend" 
        [disabled]="resendDisabled"
        (click)="onResend()"
      >
        Resend Code
      </button>
      @if (timerDisplay) {
        <div class="timer">{{ timerDisplay }}</div>
      }
    </div>

    <!-- Back button -->
    <div class="back-section">
      <button type="button" class="btn-back" (click)="goBack()">
        ‚Üê Back to Sign Up
      </button>
    </div>
  </div>
</main>