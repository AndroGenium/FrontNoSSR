@let user = user$ | async;
<!-- Tools Page -->
<div class="tools-container">
    <!-- Header -->
    <div class="tools-header">
        <h1>Available Tools</h1>
        <p>Borrow tools from our community</p>
    </div>

    <!-- Filters & Sort -->
    <div class="filters-bar">
        <div class="filter-group">
            <!-- Category Filter -->
            <select class="filter-select">
                <option value="">All Categories</option>
                <option value="power-tools">Power Tools</option>
                <option value="hand-tools">Hand Tools</option>
                <option value="gardening">Gardening</option>
                <option value="electronics">Electronics</option>
                <option value="measuring-tools">Measuring Tools</option>
            </select>

            <!-- Availability Filter -->
            <select class="filter-select">
                <option value="">All Status</option>
                <option value="available">Available</option>
                <option value="borrowed">Currently Borrowed</option>
            </select>
        </div>

        <!-- Sort -->
        <select class="sort-select">
            <option value="newest">Newest First</option>
            <option value="raised-high">Highest Donations</option>
            <option value="raised-low">Lowest Donations</option>
            <option value="rating">Highest Rated</option>
            <option value="popular">Most Popular</option>
        </select>
    </div>

    <!-- Tools Grid -->
    <div class="tools-grid">
        @if (productsArray.length != 0) 
        {
            @for (item of productsArray; track $index) {
                <div class="tool-card">
                    <div class="tool-image-container">

                        @if ((item.imageUrls?.[0]?.length ?? 0) < 11) {
                            <div class="tool-image">üî®</div>
                        }
                        @else {
                            <div class="tool-image">
                                <img [src]="`${item.imageUrls?.[0]}`" alt="">
                            </div>
                        }

                        @if (item.isAvailable) {
                            <div class="status-badge-available">Available</div>
                        }
                        @else {
                            <div class="status-badge-unavailable">Unavailable</div>
                        }
                    </div>

                    <div class="tool-info"> 
                        <div class="tool-name">{{item.name}}</div>
                        <div class="tool-rating">
                            <!-- TO DO ADD RATING TO BACK AND FRONT RATING COUNT AND RATING SCORE-->
                            <span class="rating-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            <span class="rating-count">245</span>
                        </div>
                        <div class="money-raised">
                            <span class="raised-label">Raised:</span>
                            <span class="raised-amount">{{item.moneyRaised}}$</span>
                        </div>
                        <div class="tool-actions">
                            @if (user != null) {
                                <button class="btn-borrow">Borrow</button>
                            }
                            @else {
                                <button class="btn-borrow" disabled>Log in to Borrow</button>
                            }                   
                            <button class="btn-wishlist">‚ù§Ô∏è</button>
                        </div>
                    </div>
                </div>
            }
        }
        @else {
            <p>No tools found.</p>
        }
    </div>

    <!-- Pagination -->
    <!-- <div class="pagination">
        <button class="pagination-btn">‚Üê Previous</button>
        <button class="pagination-btn active">1</button>
        <button class="pagination-btn">2</button>
        <button class="pagination-btn">3</button>
        <button class="pagination-btn">Next ‚Üí</button>
    </div> -->
</div>
